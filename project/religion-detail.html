<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi ti·∫øt T√¥n Gi√°o - ƒêa D·∫°ng T√¥n Gi√°o Vi·ªát Nam</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/mosaic.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/animations/cinematic-base.css">
    <link rel="stylesheet" href="css/animations/lun-dev-scroll.css">
</head>

<body class="mosaic-page--premium">
    <header class="header">
        <nav class="nav" role="navigation" aria-label="Main navigation">
            <div class="container nav__container">
                <a href="index.html" class="nav__brand">
                    <span class="nav__brand-icon">üïäÔ∏è</span>
                    <span class="nav__brand-text">ƒêa D·∫°ng T√¥n Gi√°o</span>
                </a>
                <a href="mosaic.html" class="nav__link">‚Üê Quay l·∫°i Mosaic</a>
            </div>
        </nav>
    </header>

    <main class="container" style="padding-top: 100px;">
        <article id="religion-detail" class="religion-detail">
            <!-- Content will be injected by JS -->
            <div class="loading-state" style="text-align: center; color: white;">ƒêang t·∫£i th√¥ng tin...</div>
        </article>
    </main>

    <script type="module">
        // Since data is in assets/data.json and processed in main.js, let's just fetch it simply here.
        // Fetching from assets/data.json is better.

        async function loadReligionDetail() {
            const urlParams = new URLSearchParams(window.location.search);
            const religionId = urlParams.get('id');

            if (!religionId) {
                document.getElementById('religion-detail').innerHTML = '<h2 style="color:white">Kh√¥ng t√¨m th·∫•y t√¥n gi√°o</h2>';
                return;
            }

            try {
                const response = await fetch('assets/data.json');
                const data = await response.json();

                // Map the ID from URL to the ID in json
                // URL IDs: buddhism, catholicism...
                // JSON IDs: buddhism, catholicism... match.

                const religion = data.religions.find(r => r.id === religionId);

                if (!religion) {
                    document.getElementById('religion-detail').innerHTML = '<h2 style="color:white">Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu t√¥n gi√°o</h2>';
                    return;
                }

                renderDetail(religion);

            } catch (error) {
                console.error("Error loading data", error);
                document.getElementById('religion-detail').innerHTML = '<h2 style="color:white">C√≥ l·ªói x·∫£y ra khi t·∫£i d·ªØ li·ªáu</h2>';
            }
        }

        function renderDetail(religion) {
            const container = document.getElementById('religion-detail');

            // Map main header image
            let imgName = `mosaic-${religion.id}.png`;
            if (religion.id === 'folk-beliefs') imgName = 'mosaic-folk.png';
            if (religion.id === 'non-religious') imgName = 'mosaic-none.png';
            if (religion.id === 'caodaism') imgName = 'mosaic-caodaism.png'; // Ensure matching

            // Content image (optional)
            let contentImageHtml = '';
            if (religion.contentImage) {
                contentImageHtml = `
                    <div class="detail-image-section" data-aos="fade-up" style="margin: 40px 0;">
                        <img src="${religion.contentImage}" alt="Ho·∫°t ƒë·ªông ${religion.name}" style="width: 100%; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
                    </div>
                `;
            }

            container.innerHTML = `
                <div class="detail-header text-center auto-show" style="padding: 40px 20px;">
                    <div class="header-image-container" style="position: relative; max-width: 800px; margin: 0 auto 30px;">
                        <img src="assets/images/${imgName}" alt="${religion.name}" style="width: 100%; height: 400px; object-fit: cover; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); padding: 40px; border-bottom-left-radius: 20px; border-bottom-right-radius: 20px;">
                             <h1 class="page-header__title" style="margin: 0; font-size: 3.5rem; text-shadow: 0 2px 10px rgba(0,0,0,0.5);">${religion.name}</h1>
                        </div>
                    </div>
                    <p class="section-subtitle" style="font-size: 1.5rem; color: ${religion.color}; font-weight: bold; background: rgba(0,0,0,0.3); display: inline-block; padding: 10px 20px; border-radius: 50px; border: 1px solid ${religion.color};">${religion.followers} t√≠n ƒë·ªì</p>
                </div>
                
                <div class="detail-content glass-panel auto-show" style="max-width: 900px; margin: 0 auto 60px; padding: 50px; border-radius: 24px; backdrop-filter: blur(20px); background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05);">
                    <p class="lead-text" style="font-size: 1.25rem; line-height: 1.8; color: #fff; margin-bottom: 40px; border-left: 4px solid ${religion.color}; padding-left: 20px;">
                        ${religion.description}
                    </p>
                    
                    ${contentImageHtml}

                    <div class="info-grid" style="display: grid; gap: 40px;">
                        <section data-aos="fade-up">
                            <h3 style="color: ${religion.color}; font-size: 1.8rem; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">üìú L·ªãch s·ª≠ h√¨nh th√†nh</h3>
                            <p style="color: #e0e0e8; line-height: 1.7;">${religion.history || 'ƒêang c·∫≠p nh·∫≠t...'}</p>
                        </section>

                        <section data-aos="fade-up" data-aos-delay="100">
                            <h3 style="color: ${religion.color}; font-size: 1.8rem; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">üôè Gi√°o l√Ω & ƒê·ª©c tin</h3>
                            <p style="color: #e0e0e8; line-height: 1.7;">${religion.beliefs || 'ƒêang c·∫≠p nh·∫≠t...'}</p>
                        </section>

                         <section data-aos="fade-up" data-aos-delay="200">
                            <h3 style="color: ${religion.color}; font-size: 1.8rem; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">üèõÔ∏è T·ªï ch·ª©c</h3>
                            <p style="color: #e0e0e8; line-height: 1.7;">${religion.organization || 'ƒêang c·∫≠p nh·∫≠t...'}</p>
                        </section>
                    </div>
                </div>
            `;

            // Re-initialize AOS if needed, or rely on global init
        }

        loadReligionDetail();
    </script>
</body>

</html>