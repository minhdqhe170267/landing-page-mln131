/**
 * Timeline Animations CSS
 * Styles for cinematic timeline page animations
 * 
 * Requirements:
 * - 5.1: SVG progress line styles
 * - 5.3: Pulsing nodes with ripple effect
 * - 5.4: 3D transforms for timeline items
 * 
 * @module css/animations/timeline-animations
 */

/* ========================================
   SVG Progress Line Styles
   Requirement 5.1: SVG progress line that fills as user scrolls
   ======================================== */

.timeline-progress-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

.timeline-progress-svg path {
    transition: stroke-dashoffset 0.1s ease-out;
    filter: drop-shadow(0 0 8px rgba(102, 126, 234, 0.5));
}

/* ========================================
   Node Ripple Animation
   Requirement 5.3: Pulsing nodes with ripple effect
   ======================================== */

@keyframes nodeRipple {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, -50%) scale(2.5);
        opacity: 0;
    }
}

/* Node ripple element */
.timeline-node-ripple {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: rgba(102, 126, 234, 0.4);
    transform: translate(-50%, -50%) scale(0);
    animation: nodeRipple 600ms ease-out forwards;
    pointer-events: none;
}

/* Active node state */
.timeline__dot.node-active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    border-color: transparent !important;
}

/* Node pulse animation */
@keyframes nodePulseGlow {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4),
                    0 0 20px rgba(102, 126, 234, 0.3);
    }
    50% {
        box-shadow: 0 0 0 15px rgba(102, 126, 234, 0),
                    0 0 30px rgba(102, 126, 234, 0.5);
    }
}

.timeline__dot.node-active {
    animation: nodePulseGlow 2s ease-in-out infinite;
}

/* ========================================
   Timeline Item 3D Transform Styles
   Requirement 5.4, 5.5: 3D transforms with alternating rotateY
   ======================================== */

/* Base 3D perspective for items */
.timeline__item {
    perspective: 1000px;
    transform-style: preserve-3d;
}

/* GPU acceleration hints */
.timeline__item,
.timeline__dot {
    will-change: transform, opacity;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

/* Fully visible state - Requirement 5.6 */
.timeline__item.fully-visible {
    opacity: 1 !important;
    transform: perspective(1000px) rotateY(0deg) scale(1) !important;
}

.timeline__item.fully-visible .timeline__content {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                0 0 40px rgba(102, 126, 234, 0.15);
}

/* ========================================
   Timeline Content Card Enhancements
   ======================================== */

.timeline__content {
    transition: box-shadow 0.3s ease-out, transform 0.3s ease-out;
}

.timeline__item.fully-visible .timeline__content:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4),
                0 0 50px rgba(102, 126, 234, 0.2);
}

/* ========================================
   Progress Line Glow Effect
   ======================================== */

.timeline-progress-svg path {
    filter: drop-shadow(0 0 6px rgba(102, 126, 234, 0.6))
            drop-shadow(0 0 12px rgba(118, 75, 162, 0.4));
}

/* ========================================
   Stagger Animation Delays
   ======================================== */

.timeline__item:nth-child(1) { --stagger-delay: 0ms; }
.timeline__item:nth-child(2) { --stagger-delay: 100ms; }
.timeline__item:nth-child(3) { --stagger-delay: 200ms; }
.timeline__item:nth-child(4) { --stagger-delay: 300ms; }
.timeline__item:nth-child(5) { --stagger-delay: 400ms; }
.timeline__item:nth-child(6) { --stagger-delay: 500ms; }
.timeline__item:nth-child(7) { --stagger-delay: 600ms; }
.timeline__item:nth-child(8) { --stagger-delay: 700ms; }

/* ========================================
   Reduced Motion Support
   Requirement 9.4: Respect prefers-reduced-motion
   ======================================== */

@media (prefers-reduced-motion: reduce) {
    .timeline-progress-svg path {
        transition: none;
    }
    
    .timeline__item {
        opacity: 1 !important;
        transform: none !important;
        transition: none !important;
    }
    
    .timeline__dot {
        animation: none !important;
    }
    
    .timeline-node-ripple {
        animation: none !important;
        display: none;
    }
    
    .timeline__content {
        transition: none;
    }
}

/* ========================================
   Mobile Optimizations
   ======================================== */

@media (max-width: 767px) {
    /* Simplified 3D effects on mobile */
    .timeline__item {
        perspective: 800px;
    }
    
    /* Reduce ripple scale on mobile */
    @keyframes nodeRipple {
        0% {
            transform: translate(-50%, -50%) scale(0);
            opacity: 1;
        }
        100% {
            transform: translate(-50%, -50%) scale(2);
            opacity: 0;
        }
    }
}

/* ========================================
   High Performance Mode
   For devices that support it
   ======================================== */

@supports (contain: layout style paint) {
    .timeline__item {
        contain: layout style;
    }
}
